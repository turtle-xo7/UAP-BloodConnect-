{% extends 'base.html' %}


{% block title %}Donation History - UAP-BloodConnect{% endblock %}


{% block content %}
<div class="card">
   <h1 style="color: var(--primary-red); margin-bottom: 2rem;">My Donation History</h1>

   {% if donations %}
   <div style="overflow-x: auto;">
       <table style="width: 100%; border-collapse: collapse;">
           <thead>
               <tr style="background: var(--gray-100);">
                   <th style="padding: 1rem; text-align: left;">Date</th>
                   <th style="padding: 1rem; text-align: left;">Units Donated</th>
                   <th style="padding: 1rem; text-align: left;">Hospital</th>
                   <th style="padding: 1rem; text-align: left;">Status</th>
                   <th style="padding: 1rem; text-align: left;">Certificate</th>
               </tr>
           </thead>
           <tbody>
               {% for donation in donations %}
               <tr style="border-bottom: 1px solid var(--gray-200);">
                   <td style="padding: 1rem;">{{ donation.donation_date }}</td>
                   <td style="padding: 1rem;">{{ donation.units_donated }}</td>
                   <td style="padding: 1rem;">{{ donation.hospital|default:"-" }}</td>
                   <td style="padding: 1rem;">
                       <span style="color: {% if donation.status == 'completed' %}green{% else %}orange{% endif %};">
                           {{ donation.get_status_display }}
                       </span>
                   </td>
                   <td style="padding: 1rem;">
                       {% if donation.certificate %}
                       <a href="{{ donation.certificate.url }}" target="_blank" style="color: var(--primary-red); text-decoration: none;">
                           üìÑ View
                       </a>
                       {% else %}
                       -
                       {% endif %}
                   </td>
               </tr>
               {% endfor %}
           </tbody>
       </table>
   </div>

   <div style="margin-top: 2rem; text-align: center;">
       <a href="{% url 'add_donation' %}" class="btn btn-primary">
           ‚ûï Add New Donation
       </a>
       <a href="{% url 'donor_dashboard' %}" class="btn btn-outline">
           ‚Üê Back to Dashboard
       </a>
   </div>
   {% else %}
   <div style="text-align: center; padding: 3rem;">
       <h3 style="color: var(--gray-600); margin-bottom: 1rem;">No donation records yet</h3>
       <p style="color: var(--gray-600); margin-bottom: 2rem;">Start tracking your life-saving donations by adding your first record.</p>
       <a href="{% url 'add_donation' %}" class="btn btn-primary">
           Add First Donation
       </a>
   </div>
   {% endif %}
</div>
{% endblock %}


